{"filter":false,"title":"AutoFace.js","tooltip":"/API/Rifts/AutoFace.js","undoManager":{"mark":1,"position":1,"stack":[[{"start":{"row":0,"column":0},"end":{"row":19,"column":3},"action":"remove","lines":["on(\"change:graphic\", function(obj, prev) {","    if(obj.get(\"name\") == \"NR\" || Campaign().get(\"turnorder\") == \"\") return;","    var degs;","    if(obj.get(\"left\") != prev.left || obj.get(\"top\") != prev.top) {","         if(obj.get(\"layer\") == \"objects\") {","            var movex = obj.get(\"left\") - prev.left;","            var movey = obj.get(\"top\") - prev.top;","            if(movey != 0) {","                degs = Math.atan(movex/movey) * 57.29577;","                if(movey < 0) degs = 360-degs%360;","                else degs = 180-degs%360;","            }","            else if(movex < 0)degs = 270;","            else degs = 90;","            degs = degs - degs%1;","            if (degs > 360) degs = degs-360;","            obj.set(\"rotation\", degs);","        }","    }","});"],"id":3},{"start":{"row":0,"column":0},"end":{"row":19,"column":3},"action":"insert","lines":["on(\"change:graphic\", function(obj, prev) {   ","    if(obj.get(\"name\") == \"NR\" || Campaign().get(\"turnorder\") == \"\") return;","    var degs;","    if(obj.get(\"left\") != prev.left || obj.get(\"top\") != prev.top) {","         if(obj.get(\"layer\") == \"objects\") {","            var movex = obj.get(\"left\") - prev.left;","            var movey = obj.get(\"top\") - prev.top;","            if(movey != 0) {","                degs = Math.atan(movex/movey) * 57.29577;","                if(movey < 0) degs = 360-degs%360;","                else degs = 180-degs%360;","            }","            else if(movex < 0)degs = 270;","            else degs = 90;","            degs = degs - degs%1;","            if (degs > 360) degs = degs-360;            ","            obj.set(\"rotation\", degs);","        }","    }","});"]}],[{"start":{"row":0,"column":42},"end":{"row":0,"column":45},"action":"remove","lines":["   "],"id":4},{"start":{"row":15,"column":44},"end":{"row":15,"column":56},"action":"remove","lines":["            "]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":19,"column":3},"end":{"row":19,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1489191974623,"hash":"2a69b89e6b08fae8effb99ddbeb9d6f6a6b97e7f"}